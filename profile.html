<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-i18n="profile.title">DAYLIFE â€“ Profile</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>

<body>
  <div class="app-shell">
    <!-- HEADER NAVIGATION -->
    <header id="appHeader"></header>

    <!-- PAGE CONTENT -->
    <main class="page">
      <div class="page-inner">

        <!-- PROFILE HEADER -->
        <section class="section profile-header">
          <div class="profile-photo" id="profilePhoto">
            <img src="assets/default-avatar.png" alt="Profile" id="profileImage">
            <button id="changePhotoBtn" class="btn btn-icon">
              <i data-lucide="camera"></i>
            </button>
          </div>
          <h2 id="profileName" data-i18n="profile.defaultName">John Doe</h2>
          <p id="profileTag" data-i18n="profile.tag">@dreamer123</p>
          <p class="profile-country" data-i18n="profile.country">ðŸ‡«ðŸ‡· France</p>
          <p class="profile-days">
            <i data-lucide="calendar-days"></i>
            <span id="daysInfo" data-i18n="profile.daysInfo">18,676 days lived Â· 11,324 remaining</span>
          </p>
        </section>

        <!-- STARS & STATS -->
        <section class="section">
          <div class="stats-row">
            <div class="stat-card">
              <i data-lucide="star" class="stat-icon"></i>
              <div class="stat-value">38</div>
              <div class="stat-label" data-i18n="profile.totalStars">Total Stars</div>
            </div>
            <div class="stat-card">
              <i data-lucide="target" class="stat-icon"></i>
              <div class="stat-value">6</div>
              <div class="stat-label" data-i18n="profile.dreamsCreated">Dreams Created</div>
            </div>
            <div class="stat-card">
              <i data-lucide="check-circle-2" class="stat-icon"></i>
              <div class="stat-value">2</div>
              <div class="stat-label" data-i18n="profile.dreamsAchieved">Dreams Achieved</div>
            </div>
          </div>
        </section>

        <!-- ANON MODE -->
        <section class="section">
          <div class="card">
            <div class="section-title-row">
              <i data-lucide="eye-off"></i>
              <div class="section-title-text" data-i18n="profile.anon">Anonymity Mode</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="anonymousToggle" />
              <span class="slider"></span>
            </label>
            <p class="section-subtitle" data-i18n="profile.anonDesc">
              Hide your name when sharing your dreams publicly.
            </p>
          </div>
        </section>

        <!-- REFERRAL & QR -->
        <section class="section">
          <div class="card">
            <div class="section-title-row">
              <i data-lucide="share-2"></i>
              <div class="section-title-text" data-i18n="profile.inviteFriends">Invite Friends</div>
            </div>
            <p data-i18n="profile.referralText">Your personal referral link:</p>
            <div class="referral-box">
              <input type="text" id="referralLink" readonly value="https://t.me/DayLifeBot?start=DREAM123" />
              <button id="copyReferralBtn" class="btn btn-icon">
                <i data-lucide="copy"></i>
              </button>
            </div>
            <div class="qr-section">
              <canvas id="qrCanvas"></canvas>
              <p class="section-subtitle" data-i18n="profile.scan">Scan to join your journey</p>
            </div>
          </div>
        </section>

        <!-- SHARE -->
        <section class="section">
          <div class="card">
            <div class="section-title-row">
              <i data-lucide="send"></i>
              <div class="section-title-text" data-i18n="profile.share">Share Your Progress</div>
            </div>
            <div class="share-buttons">
              <button class="btn-share" id="shareX"><i data-lucide="twitter"></i> X</button>
              <button class="btn-share" id="shareFB"><i data-lucide="facebook"></i> Facebook</button>
              <button class="btn-share" id="shareTG"><i data-lucide="send"></i> Telegram</button>
              <button class="btn-share" id="shareTikTok"><i data-lucide="music"></i> TikTok</button>
              <button class="btn-share" id="shareIG"><i data-lucide="camera"></i> Instagram</button>
            </div>
          </div>
        </section>

      </div>
    </main>

    <!-- BOTTOM NAVIGATION -->
    <footer id="bottomNav"></footer>
  </div>

  <!-- ðŸ”— LIBRARIES -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script src="assets/lang.js"></script>
  <script src="assets/nav.js"></script>

  <script>
    createNavBar("profile");

    // === QR Code Generation ===
    const qrCanvas = document.getElementById("qrCanvas");
    QRCode.toCanvas(qrCanvas, "https://t.me/DayLifeBot?start=DREAM123", { width: 120 });

    // === Copy referral link ===
    document.getElementById("copyReferralBtn").addEventListener("click", () => {
      const input = document.getElementById("referralLink");
      input.select();
      document.execCommand("copy");
      alert("âœ… Referral link copied!");
    });

    // === Anonymous mode toggle ===
    document.getElementById("anonymousToggle").addEventListener("change", (e) => {
      alert(e.target.checked ? "ðŸ•¶ï¸ Anonymous mode enabled" : "ðŸ‘¤ Anonymous mode disabled");
    });

    // === Change Profile Photo ===
    document.getElementById("changePhotoBtn").addEventListener("click", () => {
      const choice = confirm("Would you like to upload a photo? Press Cancel to generate an AI avatar.");
      if (choice) {
        alert("ðŸ“¸ Upload function will open here");
      } else {
        alert("ðŸ¤– Generating your AI avatar...");
      }
    });

    // === Social Shares ===
    const shareData = {
      title: "DAYLIFE",
      text: "I'm making every day count on DAYLIFE! ðŸŒ•",
      url: "https://t.me/DayLifeBot",
    };

    const shareButtons = document.querySelectorAll(".btn-share");
    shareButtons.forEach(btn => {
      btn.addEventListener("click", async () => {
        try {
          await navigator.share(shareData);
        } catch (err) {
          console.log("Share failed:", err);
        }
      });
    });
  </script>
</body>
</html>
