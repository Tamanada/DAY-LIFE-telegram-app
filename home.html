<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DAYLIFE ‚Äì Every Day Counts</title>
  <link rel="stylesheet" href="assets/style.css" />
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
  <div class="app-shell">
    <!-- HEADER -->
    <header id="appHeader"></header>

    <!-- PAGE CONTENT -->
    <main class="page">
      <div class="page-inner home-page">
        <section class="section counter-section">
          <h1 data-i18n="home.title">üåï How many days did you arrive on Earth?</h1>
          <div class="life-stats">
            <div class="days-lived">
              <span class="label" data-i18n="home.lived">Days lived</span>
              <span id="daysLived" class="value">0</span>
            </div>
            <div class="progress-bar">
              <div id="lifeProgress" class="progress-fill"></div>
            </div>
            <div class="days-left">
              <span class="label" data-i18n="home.remaining">Days remaining</span>
              <span id="daysLeft" class="value">0</span>
            </div>
          </div>
        </section>

        <!-- STARS & QUOTE -->
        <section class="section inspiration-section">
          <div class="stars-count">
            <i data-lucide="star"></i>
            <span id="starCount">‚≠ê 0</span>
          </div>
          <blockquote class="quote-box">
            <p id="quoteText">Loading inspiration...</p>
            <button id="newQuoteBtn" class="btn-refresh">
              <i data-lucide="refresh-ccw"></i>
              <span data-i18n="home.newInspiration">New inspiration</span>
            </button>
          </blockquote>
        </section>
      </div>
    </main>

    <!-- FOOTER -->
    <footer id="bottomNav"></footer>
  </div>

  <!-- üîó Scripts -->
  <script src="assets/lang.js"></script>
  <script src="assets/inspirations.js"></script>
  <script src="assets/nav.js"></script>
  <script>
    createNavBar("home");
    lucide.createIcons();

    // --- Fake profile data for demo ---
    const profile = JSON.parse(localStorage.getItem("daylifeProfile") || "{}");
    const dob = profile.dob ? new Date(profile.dob) : new Date(1990, 0, 1);
    const birthMs = dob.getTime();
    const todayMs = Date.now();
    const daysLived = Math.floor((todayMs - birthMs) / (1000 * 60 * 60 * 24));
    const totalDays = 30000; // default value
    const daysLeft = totalDays - daysLived;

    document.getElementById("daysLived").textContent = daysLived.toLocaleString();
    document.getElementById("daysLeft").textContent = daysLeft.toLocaleString();
    document.getElementById("lifeProgress").style.width = `${(daysLived / totalDays) * 100}%`;

    // --- Stars ---
    const stars = localStorage.getItem("daylifeStars") || 0;
    document.getElementById("starCount").textContent = `‚≠ê ${stars}`;

    // --- Inspirations ---
    function updateQuote(isRandom = false) {
      const lang = window.DaylifeI18n ? DaylifeI18n.getLang() : "en";
      const quote = isRandom
        ? DaylifeInspirationsAPI.getRandom(lang)
        : DaylifeInspirationsAPI.getForToday(lang);
      document.getElementById("quoteText").textContent = quote;
    }

    updateQuote(); // Initial quote

    document.getElementById("newQuoteBtn").addEventListener("click", () => {
      updateQuote(true);
      document.getElementById("starCount").textContent = `‚≠ê ${++window.starCount || 1}`;
      localStorage.setItem("daylifeStars", window.starCount);
    });

    // --- Apply translations ---
    if (window.DaylifeI18n) {
      DaylifeI18n.applyTranslations();
    }
  </script>

  <style>
    /* --- Home page style additions --- */
    .home-page h1 {
      text-align: center;
      font-weight: 700;
      color: #4b0082;
    }

    .life-stats {
      text-align: center;
      margin: 20px auto;
      width: 90%;
    }

    .life-stats .label {
      font-size: 14px;
      color: #64748b;
    }

    .life-stats .value {
      font-size: 22px;
      font-weight: bold;
      color: #1e293b;
      display: block;
      margin-top: 4px;
    }

    .progress-bar {
      height: 10px;
      border-radius: 10px;
      background: #e2e8f0;
      margin: 20px auto;
      overflow: hidden;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #6366f1, #a855f7);
      width: 0;
      transition: width 1s ease-in-out;
    }

    .stars-count {
      text-align: center;
      margin: 20px 0;
      color: #facc15;
      font-weight: bold;
    }

    .quote-box {
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
      text-align: center;
      font-style: italic;
      position: relative;
    }

    .btn-refresh {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-top: 16px;
      background: linear-gradient(90deg, #7c3aed, #2563eb);
      border: none;
      color: #fff;
      border-radius: 999px;
      padding: 10px 18px;
      cursor: pointer;
      font-size: 14px;
      transition: transform 0.2s, opacity 0.3s;
    }

    .btn-refresh:hover {
      opacity: 0.9;
      transform: scale(1.05);
    }
  </style>
</body>
</html>
